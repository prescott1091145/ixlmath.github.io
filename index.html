<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MoneyGames: Fruit Adventure</title>
<style>
  body { margin: 0; background: #ffe0f0; display: flex; justify-content: center; align-items: center; height: 100vh; font-family: sans-serif; }
  canvas { background: #ffc0e0; display: block; border: 3px solid #ff69b4; }
</style>
</head>
<body>
<canvas id="game" width="800" height="600"></canvas>
<script>
const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');

const player = { x: 400, y: 300, size: 30, color: '#ff1493', speed: 4, health: 100, level: 1, power: null };
const fruits = [];
const enemies = [];
let score = 0;

// spawn fruits randomly
function spawnFruit() {
  fruits.push({ x: Math.random() * 760 + 20, y: Math.random() * 560 + 20, size: 25, color: '#00ff00', type: Math.random() < 0.5 ? 'fire' : 'ice' });
}

// spawn enemies randomly
function spawnEnemy() {
  enemies.push({ x: Math.random() * 760 + 20, y: Math.random() * 560 + 20, size: 30, color: '#ff0000', health: 50, speed: 1.2 });
}

// initial spawns
for (let i = 0; i < 5; i++) spawnFruit();
for (let i = 0; i < 5; i++) spawnEnemy();

const keys = {};
document.addEventListener('keydown', e => { keys[e.key.toLowerCase()] = true; });
document.addEventListener('keyup', e => { keys[e.key.toLowerCase()] = false; });

// attack function (mouse click)
canvas.addEventListener('click', () => {
  enemies.forEach(e => {
    const dx = e.x - player.x;
    const dy = e.y - player.y;
    const dist = Math.sqrt(dx*dx + dy*dy);
    if (dist < 50) e.health -= 10;
  });
});

function update() {
  // move player
  if (keys['arrowup'] || keys['w']) player.y -= player.speed;
  if (keys['arrowdown'] || keys['s']) player.y += player.speed;
  if (keys['arrowleft'] || keys['a']) player.x -= player.speed;
  if (keys['arrowright'] || keys['d']) player.x += player.speed;

  // keep player in bounds
  player.x = Math.max(0, Math.min(canvas.width - player.size, player.x));
  player.y = Math.max(0, Math.min(canvas.height - player.size, player.y));

  // collect fruits
  for (let i = fruits.length - 1; i >= 0; i--) {
    const f = fruits[i];
    if (Math.abs(player.x - f.x) < (player.size + f.size)/2 && Math.abs(player.y - f.y) < (player.size + f.size)/2) {
      player.power = f.type;
      player.level++;
      score += 10;
      fruits.splice(i, 1);
      spawnFruit();
    }
  }

  // move enemies toward player
  enemies.forEach(e => {
    const dx = player.x - e.x;
    const dy = player.y - e.y;
    const dist = Math.sqrt(dx*dx + dy*dy);
    e.x += (dx/dist) * e.speed;
    e.y += (dy/dist) * e.speed;

    // attack player
    if (dist < (player.size + e.size)/2) {
      player.health -= 0.3;
    }

    // respawn if dead
    if (e.health <= 0) {
      score += 5;
      e.x = Math.random() * 760 + 20;
      e.y = Math.random() * 560 + 20;
      e.health = 50;
    }
  });

  draw();
  requestAnimationFrame(update);
}

function draw() {
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // draw player
  ctx.fillStyle = player.color;
  ctx.fillRect(player.x, player.y, player.size, player.size);

  // draw power glow
  if (player.power) {
    ctx.strokeStyle = player.power === 'fire' ? '#ff4500' : '#00f';
    ctx.lineWidth = 4;
    ctx.beginPath();
    ctx.arc(player.x + player.size/2, player.y + player.size/2, 25, 0, Math.PI*2);
    ctx.stroke();
  }

  // draw fruits
  fruits.forEach(f => {
    ctx.fillStyle = f.color;
    ctx.fillRect(f.x, f.y, f.size, f.size);
  });

  // draw enemies
  enemies.forEach(e => {
    ctx.fillStyle = e.color;
    ctx.fillRect(e.x, e.y, e.size, e.size);
    // enemy health bar
    ctx.fillStyle = '#000';
    ctx.fillRect(e.x, e.y - 6, e.size, 4);
    ctx.fillStyle = '#0f0';
    ctx.fillRect(e.x, e.y - 6, e.size * (e.health / 50), 4);
  });

  // stats
  ctx.fillStyle = '#000';
  ctx.font = '20px Arial';
  ctx.fillText(`Health: ${Math.floor(player.health)}`, 10, 20);
  ctx.fillText(`Level: ${player.level}`, 10, 45);
  ctx.fillText(`Score: ${score}`, 10, 70);
}

// start game
update();
</script>
</body>
</html>
